(this["webpackJsonpnaughty-scrabble"]=this["webpackJsonpnaughty-scrabble"]||[]).push([[0],{80:function(e,n,t){},88:function(e,n,t){},89:function(e,n,t){},90:function(e,n,t){},91:function(e,n,t){},92:function(e,n,t){},93:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(0),o=t.n(a),r=t(9),i=t.n(r),s=(t(80),t(14)),l=t(20),j=t(12),d=t(64),b=t(144),u=Object(a.createContext)(),h=t(128),O=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Welcome!"}),Object(c.jsx)(h.a,{component:l.b,to:"/create",color:"primary",variant:"contained",children:"Start game"})]})},f=t(49),x=t.n(f),m=t(58),p=t(65),g=t(145),v=t(134),w=t(59),C=t.n(w),y=function(){var e=Object(a.useState)(""),n=Object(s.a)(e,2),t=n[0],o=n[1],r=Object(a.useContext)(u).setGameID,i=function(){var e=Object(m.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:n=e.sent,o(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Failed to read clipboard");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(g.a,{label:"Text",placeholder:"Put you text here",multiline:!0,rows:4,variant:"outlined",value:t,onChange:function(e){console.log(e)}}),Object(c.jsx)(v.a,{onClick:i,"aria-label":"paste from clipboard",component:"span",color:"primary",children:Object(c.jsx)(C.a,{})})]}),Object(c.jsx)(h.a,{component:l.b,onClick:function(){return r(Object(p.a)())},to:"/invite",color:"primary",variant:"contained",children:"Proceed"})]})},D=t(60),S=t.n(D),R=t(61),N=t.n(R),T=t(62),k=t.n(T),I=t(63),P=t.n(I),A=t(135),E=t(66),L=Object(a.createContext)({open:function(){},onMessage:function(){},sendMessage:function(){},user:""}),B=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.msRTCPeerConnection,M=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription||window.msRTCSessionDescription,z={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},F={},J="Alice",W=function(e){var n=Object(a.useState)(null),t=Object(s.a)(n,2),o=t[0],r=t[1],i=Object(a.useState)(),l=Object(s.a)(i,2),j=l[0],d=l[1],b=Object(a.useState)(),u=Object(s.a)(b,2),h=u[0],O=u[1],f={open:function(n){return function(n){return new Promise((function(t,c){var a,o,i=null,s="".concat(J,"_").concat(Math.floor(1e4*Math.random()));function l(){return(a=new B(z,F)).onicecandidate=function(e){a&&e&&e.candidate&&j("candidate",e.candidate)},(o=a.createDataChannel("datachannel",{reliable:!1})).onopen=function(){console.log("%cDATACHANNEL OPENED","color: green"),r(s),d(o),setTimeout((function(){t()}),500)},o.onclose=function(){console.log("%cDATACHANNEL CLOSED","color: red")},o.onerror=function(){console.log("%cDATACHANNEL ERROR","color: red")},a.ondatachannel=function(e){e.channel.onopen=function(){O(e.channel)}},a}function j(e,t){var c={from:s,gameID:n,action:e,data:t};i.send(JSON.stringify(c))}function b(e){var n=l();n.setRemoteDescription(new M(e)).catch((function(e){console.log(e)}));var t={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};n.createAnswer(t).then((function(e){return n.setLocalDescription(e).then((function(){j("answer",e)}))}),(function(e){console.log(e)}))}function u(e){a.setRemoteDescription(new M(e))}function h(e){a.addIceCandidate(new RTCIceCandidate(e)).catch((function(e){console.log(e)}))}(i=new WebSocket(e.url)).onopen=function(e){console.log("%cWebsocket opened","color: gray"),l();var n={offerToReceiveAudio:!0,offerToReceiveVideo:!1};a.createOffer(n).then((function(e){a.setLocalDescription(e),j("offer",e)}),(function(e){console.log(e)}))},i.onclose=function(e){console.log("%cWebsocket closed","color: gray")},i.onerror=function(e){console.log("%cWebsocket error","color: red")},i.onmessage=function(e){var t=JSON.parse(e.data);t.gameID===n&&t.from!==s&&("candidate"===t.action?h(t.data):"offer"===t.action?b(t.data):"answer"===t.action&&u(t.data))}}))}(n)},onMessage:function(e){return function(e){h&&(h.onmessage=function(n){console.log("%cMessage received:\n".concat(n.data),"font-weight: bold"),e&&e(n.data)})}(e)},sendMessage:function(e){return function(e){j&&j.send(e)}(e)},user:o};return Object(c.jsx)(L.Provider,Object(E.a)({value:f},e))},G=function(){return Object(a.useContext)(L)},H="ready",V="success",_="failure",q=function(){var e=Object(a.useState)(H),n=Object(s.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(!1),i=Object(s.a)(r,2),l=i[0],d=i[1],b=Object(a.useContext)(u).gameID,O="/game/".concat(b),f="".concat("http://localhost:3000","/join/").concat(b),x=G(),m=Object(j.f)();return Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Share this link with your friend to play the SRRRABBBLE:"}),Object(c.jsx)("code",{children:"".concat(f)}),navigator.share&&Object(c.jsx)("p",{children:Object(c.jsx)(v.a,{onClick:function(){navigator.share({url:"".concat(f),title:"SCRABBLE",text:"Invite your friend to the game!"}).then((function(){return console.log("Invite sent!")})).catch((function(e){return console.log("".concat(e))}))},children:Object(c.jsx)(S.a,{})})}),navigator.clipboard&&Object(c.jsx)("p",{children:Object(c.jsx)(v.a,{onClick:function(){if(t===H)try{navigator.clipboard.writeText(f).then((function(){return o(V)})).catch((function(){return o(_)}))}catch(e){console.log("Failed to write to clipboard")}},"aria-label":"paste from clipboard",component:"span",children:t===H?Object(c.jsx)(N.a,{}):t===V?Object(c.jsx)(k.a,{}):Object(c.jsx)(P.a,{})})}),Object(c.jsx)("p",{children:Object(c.jsx)(h.a,{color:"primary",variant:"contained",onClick:function(){d(!0),x.open(b).then((function(){m.push(O),d(!1)})).catch((function(){d(!1)}))},disabled:l,children:"Proceed to game"})}),l&&Object(c.jsxs)(c.Fragment,{children:["Waiting for peer: ",Object(c.jsx)(A.a,{size:24})]})]})},K=function(){var e=Object(a.useState)(!1),n=Object(s.a)(e,2),t=n[0],o=n[1],r=Object(j.f)(),i=Object(j.g)().gameID,l="/game/".concat(i),d=G();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Join to the SRRRABBBLE"}),Object(c.jsxs)("code",{children:["Game ID: ",i]}),Object(c.jsx)("p",{children:Object(c.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){o(!0),d.open(i).then((function(){r.push(l),o(!1)})).catch((function(){o(!1)}))},disabled:t,children:"Join"})}),t&&Object(c.jsxs)(c.Fragment,{children:["Joining: ",Object(c.jsx)(A.a,{size:24})]})]})},Q=(t(88),new Array(225).fill({}));var U=function(){return Object(c.jsx)("div",{className:"board",children:Q.map((function(e,n){return Object(c.jsx)("div",{className:"cell"},n)}))})},X=t(136),Y=t(133),Z=t(138),$=t(146),ee=t(137),ne=(t(89),Object(X.a)((function(e){return{root:{backgroundColor:e.palette.background.paper}}})));var te=function(){var e=ne(),n=G(),t=Object(a.useState)([]),o=Object(s.a)(t,2),r=o[0],i=o[1],l=function(e){i([e].concat(r.map((function(e){return e}))))};return Object(a.useEffect)((function(){n.onMessage(l),setTimeout((function(){n.sendMessage("".concat(n.user," joined"))}),1e3)}),[]),Object(c.jsx)("div",{className:"log",children:Object(c.jsx)(Y.a,{className:e.root,component:"nav","aria-label":"main mailbox folders",subheader:Object(c.jsx)(ee.a,{component:"div",children:"Logs:"}),children:r.map((function(e,n){return Object(c.jsx)(Z.a,{children:Object(c.jsx)($.a,{primary:e})},n)}))})})},ce=t(140),ae=t(141),oe=t(143),re=t(139),ie=t(142),se=t(132);t(90);var le=function(){return Object(c.jsx)("div",{className:"scoreboard",children:Object(c.jsx)(re.a,{component:se.a,children:Object(c.jsx)(ce.a,{"aria-label":"simple table",size:"small",children:Object(c.jsxs)(ae.a,{children:[Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(oe.a,{component:"th",scope:"row",children:"Player #1 last score:"}),Object(c.jsx)(oe.a,{align:"right",children:"5"})]}),Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(oe.a,{component:"th",scope:"row",children:"Player #1 total score:"}),Object(c.jsx)(oe.a,{align:"right",children:"47"})]}),Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(oe.a,{component:"th",scope:"row",children:"Player #2 last score:"}),Object(c.jsx)(oe.a,{align:"right",children:"2"})]}),Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(oe.a,{component:"th",scope:"row",children:"Player #2 total score:"}),Object(c.jsx)(oe.a,{align:"right",children:"54"})]})]})})})})},je=(t(91),Object(X.a)((function(e){return{btn:{margin:"0 2px"}}})));var de=function(){var e=je();return Object(c.jsxs)("div",{className:"controls",children:[Object(c.jsx)(h.a,{variant:"contained",size:"small",color:"primary",className:e.btn,children:"Submit"}),Object(c.jsx)(h.a,{variant:"contained",size:"small",color:"secondary",className:e.btn,children:"Pass"}),Object(c.jsx)(h.a,{variant:"contained",size:"small",className:e.btn,children:"Reset"}),Object(c.jsx)(h.a,{variant:"contained",size:"small",className:e.btn,children:"Swap"})]})},be=function(){var e=Object(j.g)().gameID;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("h1",{className:"title",children:["Game ID: ",e]}),Object(c.jsxs)("div",{className:"game",children:[Object(c.jsx)("div",{className:"main",children:Object(c.jsx)(U,{})}),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)(te,{}),Object(c.jsx)(le,{}),Object(c.jsx)(de,{})]})]})]})};t(92);var ue=function(){var e=Object(d.a)({palette:{type:"dark",primary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#fff"}}}),n=Object(a.useState)(),t=Object(s.a)(n,2),o=t[0],r=t[1];return Object(c.jsx)(l.a,{children:Object(c.jsx)(u.Provider,{value:{gameID:o,setGameID:r},children:Object(c.jsx)(W,{url:"ws://88.99.175.232:8054",children:Object(c.jsx)(b.a,{theme:e,children:Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/create",children:Object(c.jsx)(y,{})}),Object(c.jsx)(j.a,{path:"/invite",children:Object(c.jsx)(q,{})}),Object(c.jsx)(j.a,{path:"/join/:gameID",children:Object(c.jsx)(K,{})}),Object(c.jsx)(j.a,{path:"/game/:gameID",children:Object(c.jsx)(be,{})}),Object(c.jsx)(j.a,{path:"/",children:Object(c.jsx)(O,{})})]})})})})})})},he=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,147)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),a(e),o(e),r(e)}))};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(ue,{})}),document.getElementById("root")),he()}},[[93,1,2]]]);
//# sourceMappingURL=main.f27341a1.chunk.js.map